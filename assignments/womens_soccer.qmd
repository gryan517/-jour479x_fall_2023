---
title: "Women's Soccer Data"
output: html_notebook
---

We'll use this notebook to explore some NCAA women's soccer data and [our questions](https://docs.google.com/spreadsheets/d/1kTSrnl1URmcexIWLDMWqDnp3q-c2OS45uifnhjp10n4/edit#gid=0). First, let's load the tidyverse library:

```{r}
library(tidyverse)
```

We'll want to start with 2023 match data, which is located in [this GitHub repository](https://github.com/dwillis/NCAAWomensSoccerData). We can load the match data directly from GitHub using `read_csv`:


```{r}
matches_2023 <- read_csv("https://raw.githubusercontent.com/dwillis/NCAAWomensSoccerData/main/data/ncaa_womens_soccer_matchstats_2023.csv")
```

Let's take a look at this data to see what it contains, using `head` and `glimpse`:

```{r}
head(matches_2023)
glimpse(matches_2023)
```
```{r}
matches_2022 <- read_csv("https://raw.githubusercontent.com/dwillis/NCAAWomensSoccerData/main/data/ncaa_womens_soccer_matchstats_2022.csv")
```
```{r}
head(matches_2022)
glimpse(matches_2022)
```

Now, onto the questions using aggregates, which means `group_by` and `summarize`:

1. How many shots in total has Maryland attempted and how many have been on goal? Calculate a percentage of shots on goal.

```{r}
matches_2023|>
  group_by(team)|>
  summarise(
    sum_goals = sum (sh_att), 
    sum_on_goal = sum(so_g), 
    percent = (sum_on_goal/sum_goals)*100
  )

```

2. What about the same shot stats from last season's first four games? You'll need to load the matches from 2022 - just change the season in the URL - and filter by date to find the first four games.

```{r}
matches_2022|> 
  filter(date < "2022-09-04")|>
  filter(team == "Maryland Terrapins, Terps")|>
  group_by(team)|>
  summarise(
    sum_goals = sum(sh_att), 
    sum_on_goal = sum(so_g), 
    percent = (sum_on_goal/sum_goals)*100
    )

```




3. What about draws - Maryland started 2022 with 4 ties. Have any other teams had as many this season?

```{r}
matches_2023|>
  group_by(team, team_score, opponent_score = team_score)|>
  summarise(
    count = n()
  )
#i've isolated the ties, but now i'm trying to figure out a way to bring together the amount of ties by team. i thought i would do this by the sum function, but im not sure how to apply it correctly. another idea would be the count function. once i found this i was arrange the info in desc order.
```


4. How many total corner kicks has Maryland had so far and how many have its opponents have? Calculate the difference between the two totals for every team.

```{r}
matches_2023|>
  group_by(team)|>
  summarise(
    sum_corners = sum (corners), 
    sum_opp_corners = sum(defensive_corners), 
    diff = (sum_corners-sum_opp_corners)
  ) |>
arrange(desc(diff))
```

